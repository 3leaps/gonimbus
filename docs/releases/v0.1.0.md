# Gonimbus v0.1.0 Release Notes

**Release Date**: 2026-01-03
**Status**: Initial Public Release

## Overview

Gonimbus is a Go-first library + CLI + server for large-scale inspection and crawl of cloud object storage. v0.1.0 delivers S3 support with prefix-first listing and JSONL output, designed for datasets with 100K-1M+ objects.

## Features

### Provider Interface & S3 Implementation

The provider abstraction (`pkg/provider/`) enables pluggable cloud storage backends:

- **S3 Provider**: Full AWS SDK v2 integration with default credential chain
- **S3-Compatible**: Wasabi, Cloudflare R2, DigitalOcean Spaces, MinIO
- **Flexible Auth**: Environment variables, AWS profiles, IAM roles, explicit credentials
- **Custom Endpoints**: Configure any S3-compatible endpoint

```go
provider, err := s3.New(ctx, s3.Config{
    Bucket:   "my-bucket",
    Region:   "us-east-1",
    Endpoint: "https://s3.us-east-2.wasabisys.com", // optional
})
```

### Pattern Matching Layer

The match layer (`pkg/match/`) provides efficient pattern matching at scale:

- **Doublestar Globs**: Full `**/*.parquet` pattern support via bmatcuk/doublestar
- **Prefix Derivation**: Extracts longest static prefix for efficient listing
- **Include/Exclude**: Multiple patterns with precedence rules
- **Hidden Files**: Configurable filtering of `.hidden` paths

```go
matcher, err := match.New(match.Config{
    Includes: []string{"data/2024/**/*.parquet"},
    Excludes: []string{"**/_temporary/**"},
})
prefixes := matcher.Prefixes() // ["data/2024/"]
```

### JSONL Output Layer

Stream-friendly output (`pkg/output/`) with typed record envelopes:

| Record Type            | Description                                 |
| ---------------------- | ------------------------------------------- |
| `gonimbus.object.v1`   | Object metadata (key, size, etag, modified) |
| `gonimbus.error.v1`    | Error with code, message, and context       |
| `gonimbus.progress.v1` | Progress update (phase, counts, bytes)      |

```json
{
  "type": "gonimbus.object.v1",
  "ts": "2026-01-03T10:00:00Z",
  "job_id": "abc123",
  "provider": "s3",
  "data": {
    "key": "data/file.parquet",
    "size": 1048576,
    "etag": "abc123",
    "last_modified": "2026-01-02T12:00:00Z"
  }
}
```

### Crawl Engine

Bounded streaming pipeline (`pkg/crawler/`) with production-ready features:

- **Concurrent Listing**: Parallel prefix crawling with configurable concurrency
- **Backpressure**: Bounded channels prevent memory exhaustion
- **Rate Limiting**: Token bucket rate limiter for API throttling
- **Progress Tracking**: Periodic progress records and final summary
- **Graceful Shutdown**: Context cancellation propagates to all goroutines

```go
crawler := crawler.New(provider, matcher, writer, crawler.Config{
    Concurrency:   8,
    ChannelBuffer: 1000,
    ProgressEvery: 500,
})
summary, err := crawler.Run(ctx)
```

### Job Manifest Schema

JSON Schema validated manifests (`pkg/manifest/`) for reproducible crawls:

```yaml
version: "1.0"
connection:
  provider: s3
  bucket: my-data-lake
  region: us-west-2
match:
  includes:
    - "**/*.parquet"
  excludes:
    - "**/_temporary/**"
crawl:
  concurrency: 8
output:
  destination: stdout
  progress: true
```

### CLI Commands

| Command                           | Description                            |
| --------------------------------- | -------------------------------------- |
| `gonimbus crawl --job <manifest>` | Run crawl from manifest file           |
| `gonimbus inspect <uri>`          | Quick inspection of object or prefix   |
| `gonimbus doctor`                 | Environment and credential diagnostics |
| `gonimbus serve`                  | Start HTTP server                      |
| `gonimbus version`                | Show version information               |

#### Inspect Examples

```bash
# List bucket root
gonimbus inspect s3://my-bucket/

# Inspect single object
gonimbus inspect s3://my-bucket/data/file.parquet

# Pattern matching with S3-compatible endpoint
gonimbus inspect 's3://bucket/**/*.json' \
  --endpoint https://s3.us-east-2.wasabisys.com \
  --region us-east-2

# JSON output
gonimbus inspect s3://bucket/prefix/ --json
```

#### Crawl Examples

```bash
# Run crawl
gonimbus crawl --job manifest.yaml

# Dry run (validate and show plan)
gonimbus crawl --job manifest.yaml --dry-run

# Output to file
gonimbus crawl --job manifest.yaml -o results.jsonl
```

### Server Endpoints

| Endpoint              | Description                             |
| --------------------- | --------------------------------------- |
| `GET /health`         | Full health check with component status |
| `GET /health/live`    | Kubernetes liveness probe               |
| `GET /health/ready`   | Kubernetes readiness probe              |
| `GET /health/startup` | Kubernetes startup probe                |
| `GET /version`        | Version and build metadata              |
| `GET /metrics`        | Prometheus metrics                      |

## Dependencies

```
github.com/aws/aws-sdk-go-v2 v1.36.3
github.com/bmatcuk/doublestar/v4 v4.9.1
github.com/fulmenhq/gofulmen v0.1.29
github.com/go-chi/chi/v5 v5.2.3
github.com/spf13/cobra v1.9.1
github.com/spf13/viper v1.21.0
go.uber.org/zap v1.27.0
```

## Test Coverage

| Package                      | Coverage |
| ---------------------------- | -------- |
| `pkg/match`                  | 98.2%    |
| `pkg/output`                 | 92.1%    |
| `pkg/crawler`                | 85.9%    |
| `pkg/manifest`               | 81.7%    |
| `internal/config`            | 86.5%    |
| `internal/server/middleware` | 94.2%    |
| `internal/server/handlers`   | 86.7%    |

## Known Limitations

- **S3 Only**: GCS support planned for v0.2.x
- **No Resumability**: Interrupted crawls cannot be resumed (planned for v0.1.1)
- **No DuckDB Sink**: Local indexing deferred to v0.1.1
- **AWS SDK Mocking**: Some test coverage requires LocalStack (v0.1.1)

## Upgrade Notes

This is the initial release. No upgrade path required.

## Contributors

- Dave Thompson (@3leapsdave)

## License

Apache License 2.0 - see [LICENSE](../../LICENSE)
