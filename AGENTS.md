# Gonimbus – AI Agent Guide

**Project**: gonimbus
**Purpose**: Cloud object storage crawl/inspect engine (library + CLI + server)
**Maintainers**: See `MAINTAINERS.md`

## Operating Model

| Aspect   | Setting                                  |
| -------- | ---------------------------------------- |
| Mode     | Supervised (human reviews before commit) |
| Role     | devlead (default)                        |
| Identity | Per session (no persistent memory)       |

See [3leaps-crucible agent-identity standard](https://crucible.3leaps.dev/repository/agent-identity) for operating modes and attribution patterns.

## Read First

1. **Confirm your role.** Roles are defined below. Default to `devlead` if unspecified.
2. **Check `AGENTS.local.md`** if it exists (gitignored) for tactical session guidance.
3. **Read `MAINTAINERS.md`** for human maintainer contacts.
4. **Read files before editing them.**

## Quick Reference

| Task           | Command          | Notes                 |
| -------------- | ---------------- | --------------------- |
| Quality checks | `make check-all` | Run before committing |
| Tests          | `make test`      | Must pass             |
| Format         | `make fmt`       | Auto-format code      |
| Build          | `make build`     | Build binary          |
| Run            | `make run`       | Start dev server      |

## Role-Based Development

Agents operate in role contexts. Each role has defined scope.

| Role       | Focus                                     |
| ---------- | ----------------------------------------- |
| `devlead`  | Core implementation, CLI, integration     |
| `provider` | S3/GCS providers, auth chains, SDK wiring |
| `crawler`  | Crawl engine, matching, outputs, pipeline |
| `qa`       | Testing, validation, coverage             |
| `prodmktg` | Use cases, personas, value messaging      |

When assigned a role, constrain actions to that scope.

### devlead – Development Lead

- **Scope**: Core implementation, CLI commands, cross-cutting coordination
- **Responsibilities**: Feature implementation, code review, integration, release prep
- **Escalates to**: maintainers for releases, breaking changes

### provider – Provider & Auth

- **Scope**: Provider implementations (S3, GCS), auth chains, SDK integration
- **Responsibilities**: Provider interface, credential handling, endpoint configuration
- **Escalates to**: devlead for API design decisions

### crawler – Crawl Engine

- **Scope**: Crawl engine, pattern matching, prefix derivation, outputs
- **Responsibilities**: Pipeline implementation, JSONL writer, backpressure, rate limiting
- **Escalates to**: devlead for architecture decisions

### qa – Quality Assurance

- **Scope**: Testing strategy, coverage, validation
- **Responsibilities**: Test suites, integration tests, schema validation
- **Escalates to**: devlead for test infrastructure decisions

### prodmktg – Product Marketing

- **Scope**: Use case articulation, user personas, value propositions, storytelling
- **Responsibilities**:
  - Develop user personas and journey maps for enterprise operators managing large buckets
  - Craft messaging that leads with benefits (fast queries, cost reduction) over features
  - Create pipeline designs, use case documentation, and adoption narratives
  - Document real-world scenarios from dogfooding (ignite-dogfood/)
  - Review README and docs for customer-facing clarity
- **Mindset**:
  - Benefits over features (99% reduction in listing, not "scoped builds")
  - Empathy for operators drowning in bucket scale
  - Ground narratives in real dogfooding data
- **Does NOT**:
  - Make unsubstantiated performance claims
  - Use jargon without customer-friendly translation
  - Prioritize features over clear user benefits
- **Escalates to**: devlead for technical accuracy, maintainers for brand/positioning

**Gonimbus-specific context**: This tool solves a narrow but incredibly valuable problem for users with GIGANTIC buckets (10M+ objects). The prodmktg role articulates use cases like "retail transaction data acquisition" where date is buried below site, indexes enable instant queries, and streaming enables content-aware reorganization.

## Session Protocol

### Startup

1. Read `AGENTS.local.md` if exists (tactical overrides)
2. Identify your role from context or request assignment
3. Scan relevant code before making changes

### Before Committing

1. Run quality gates: `make check-all`
2. Verify tests pass
3. Stage all modified files
4. Use proper attribution format

### Escalation

Escalate to maintainers (see `MAINTAINERS.md`) for:

- Releases and version tags
- Breaking changes
- Security concerns
- Architectural decisions

## Commit Attribution

```
<type>(<scope>): <subject>

<body>

Changes:
- Specific change 1
- Specific change 2

Generated by [Model] via [Interface] under supervision of <maintainer>
Role: <role>

Co-Authored-By: [Model] <noreply@3leaps.net>
Committer-of-Record: <maintainer>
```

**Example:**

```
feat(provider): add S3 provider with default auth chain

Implements S3 provider using AWS SDK v2 default configuration.

Changes:
- Add pkg/provider/s3/provider.go with List/Head operations
- Support custom endpoints for S3-compatible stores
- Wire default credential chain (env, profiles, assume-role)

Generated by Claude Sonnet via Claude Code under supervision of @3leapsdave
Role: provider

Co-Authored-By: Claude Sonnet <noreply@3leaps.net>
Committer-of-Record: @3leapsdave
```

## DO / DO NOT

### DO

- Run `make check-all` before commits
- Read files before editing them
- Keep changes minimal and focused
- Test manually when changing CLI behavior
- Document decisions in code comments or docs/

### DO NOT

- Push without maintainer approval
- Skip quality gates
- Commit secrets or credentials
- Commit `.plans/` contents (gitignored)
- Create unnecessary files
- Touch code outside your task scope

## References

- `MAINTAINERS.md` - Human maintainers
- `README.md` - Project overview
- `docs/provenance.md` - Ecosystem heritage
- `docs/architecture.md` - Component design
- `.plans/active/v0.1.0/` - Current work (gitignored)

### Role Catalog (Crucible)

Full role definitions with schemas, checklists, and examples:

- [crucible/config/agentic/roles/](https://github.com/3leaps/crucible/tree/main/config/agentic/roles) - YAML role definitions
- [crucible/docs/catalog/roles/](https://github.com/3leaps/crucible/tree/main/docs/catalog/roles) - Role documentation
